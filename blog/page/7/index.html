<!DOCTYPE html>
<html lang="zh-cn"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="icon shortcut" href="/favicon.ico" sizes="32x32" />
<link rel="icon" href="/favicon.png" type="image/png" />
<link rel="icon" href="/favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)" />
<link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16" />
<link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32" />
<link rel="apple-touch-icon" href="/favicon-180x180.png" type="image/png" sizes="180x180" />
<link fetchpriority="low" href="/site.webmanifest" rel="manifest" />

  <title>技术博客 – 保罗札记</title>
  <meta name="description" content="" />

  
    <link rel="canonical" href="http://localhost:1313/blog/" itemprop="url" />
  

  

<meta property="og:title" content="技术博客" />
<meta property="og:description" content="Paul Zeng&#39;s personal website and blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/blog/" />

  
  <meta itemprop="name" content="技术博客">
  <meta itemprop="description" content="Paul Zeng&#39;s personal website and blog">
  <meta itemprop="datePublished" content="2024-10-23T13:01:00+08:00">
  <meta itemprop="dateModified" content="2024-11-30T18:58:28+08:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="技术博客">
  <meta name="twitter:description" content="Paul Zeng&#39;s personal website and blog">

    <link href="/css/compiled/main.css" rel="stylesheet" />



  <link href="/css/custom.css" rel="stylesheet" />





  <script>
     
    const defaultTheme = 'system';

    const setDarkTheme = () => {
      document.documentElement.classList.add("dark");
      document.documentElement.style.colorScheme = "dark";
    }
    const setLightTheme = () => {
      document.documentElement.classList.remove("dark");
      document.documentElement.style.colorScheme = "light";
    }

    if ("color-theme" in localStorage) {
      localStorage.getItem("color-theme") === "dark" ? setDarkTheme() : setLightTheme();
    } else {
      defaultTheme === "dark" ? setDarkTheme() : setLightTheme();
      if (defaultTheme === "system") {
        window.matchMedia("(prefers-color-scheme: dark)").matches ? setDarkTheme() : setLightTheme();
      }
    }
  </script>

  
</head>
<body dir="ltr"><div class="nav-container hx-sticky hx-top-0 hx-z-20 hx-w-full hx-bg-transparent print:hx-hidden">
  <div class="nav-container-blur hx-pointer-events-none hx-absolute hx-z-[-1] hx-h-full hx-w-full hx-bg-white dark:hx-bg-dark hx-shadow-[0_2px_4px_rgba(0,0,0,.02),0_1px_0_rgba(0,0,0,.06)] contrast-more:hx-shadow-[0_0_0_1px_#000] dark:hx-shadow-[0_-1px_0_rgba(255,255,255,.1)_inset] contrast-more:dark:hx-shadow-[0_0_0_1px_#fff]"></div>

  <nav class="hx-mx-auto hx-flex hx-items-center hx-justify-end hx-gap-2 hx-h-16 hx-px-6 hx-max-w-[90rem]">
    <a class="hx-flex hx-items-center hover:hx-opacity-75 ltr:hx-mr-auto rtl:hx-ml-auto" href="/">
        <img class="hx-block dark:hx-hidden" src="/logos/logo.png" alt="保罗札记" height="46" width="220" />
        <img class="hx-hidden dark:hx-block" src="/logos/logo.png" alt="保罗札记" height="46" width="220" />
    </a><a
            title="首页"
            href="/"
            
            class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"
          >
            <span class="hx-text-center">首页</span>
          </a><a
            title="技术博客"
            href="/blog"
            
            class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-font-medium"
          >
            <span class="hx-text-center">技术博客</span>
          </a><a
            title="关于我"
            href="/about"
            
            class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"
          >
            <span class="hx-text-center">关于我</span>
          </a><div class="search-wrapper hx-relative md:hx-w-64">
  <div class="hx-relative hx-flex hx-items-center hx-text-gray-900 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300">
    <input
      placeholder="搜索文档..."
      class="search-input hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-px-3 hx-py-2 hx-transition-colors hx-text-base hx-leading-tight md:hx-text-sm hx-bg-black/[.05] dark:hx-bg-gray-50/10 focus:hx-bg-white dark:focus:hx-bg-dark placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 contrast-more:hx-border contrast-more:hx-border-current"
      type="search"
      value=""
      spellcheck="false"
    />
    <kbd
      class="hx-absolute hx-my-1.5 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex"
    >
      CTRL K
    </kbd>
  </div>

  <div>
    <ul
      class="search-results hextra-scrollbar hx-hidden hx-border hx-border-gray-200 hx-bg-white hx-text-gray-100 dark:hx-border-neutral-800 dark:hx-bg-neutral-900 hx-absolute hx-top-full hx-z-20 hx-mt-2 hx-overflow-auto hx-overscroll-contain hx-rounded-xl hx-py-2.5 hx-shadow-xl hx-max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] md:hx-max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx-inset-x-0 ltr:md:hx-left-auto rtl:md:hx-right-auto contrast-more:hx-border contrast-more:hx-border-gray-900 contrast-more:dark:hx-border-gray-50 hx-w-screen hx-min-h-[100px] hx-max-w-[min(calc(100vw-2rem),calc(100%+20rem))]"
      style="transition: max-height 0.2s ease 0s;"
    ></ul>
  </div>
</div>
<button type="button" aria-label="Menu" class="hamburger-menu -hx-mr-2 hx-rounded hx-p-2 active:hx-bg-gray-400/20 md:hx-hidden"><svg height=24 fill="none" viewBox="0 0 24 24" stroke="currentColor"><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8H20"></path></g><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16H20"></path></g></svg></button>
  </nav>
</div>
<div class="hx-mx-auto hx-flex hx-max-w-screen-xl">
    
    <article class="hx-w-full hx-break-words hx-flex hx-min-h-[calc(100vh-var(--navbar-height))] hx-min-w-0 hx-justify-center hx-pb-8 hx-pr-[calc(env(safe-area-inset-right)-1.5rem)]">
      <main class="hx-w-full hx-min-w-0 hx-max-w-6xl hx-px-6 hx-pt-4 md:hx-px-12">
        <br class="hx-mt-1.5 hx-text-sm" />
        <h1 class="hx-text-center hx-mt-2 hx-text-4xl hx-font-bold hx-tracking-tight hx-text-slate-900 dark:hx-text-slate-100">技术博客</h1>
        <div class="content"></div>
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/05/spring_quartz_customize_scheduler_name/">Spring Quartz 指定Scheduler Name</a></h3>
                <div><a class="tag_item">spring</a><a class="tag_item">quartz</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">当前项目使用quartz与spring来做基于数据库的集群化任务调度，但是在实际使用过程发现同一个scheduler中，不同group之间任务调度可能会相互跑串。当前项目中使用的 quartz-scheduler 版本 2.3.1， spring 版本 3.2.18.RELEASE。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/05/spring_quartz_customize_scheduler_name/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">May 31, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/05/manjaro_install_vmware/">Manjaro安装VMware Workstation</a></h3>
                <div><a class="tag_item">manjaro</a><a class="tag_item">vmware</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">安装VMware workstation
yay -S vmware-workstation 启动时候如果报错：Please make sure that the kernel module `vmmon’ is loaded. 则需要重新安装一下linux-headers，加载一下vmmon模块</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/05/manjaro_install_vmware/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">May 26, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/05/manjaro_chrome_default_browser/">Manjaro设置chrome为默认浏览器</a></h3>
                <div><a class="tag_item">manjaro</a><a class="tag_item">chrome</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">安装完 Manjaro，一般会自带 Firefox浏览器。如果自己想再安装 chrome，并且设置成默认浏览器，则需要两个步骤：
在 Default Applications 中选择 Chrome 为默认的浏览器。除了这一步还不够，打开 chrome 依然有提示说“chrome 不是默认浏览器”，这就需要下面的第二步来解决。 在 File Association 中找到 html 项， 选择使用 Chrome 打开该类型的文件。 </p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/05/manjaro_chrome_default_browser/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">May 25, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/05/mac_write_iso_into_udisk/">MacOS中通过ISO镜像制作U盘安装盘</a></h3>
                <div><a class="tag_item">mac</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">使用MacOS自带的dd命令，就可以将ISO镜像写入到U盘。这就可以利用这个命令来制作安装windows，Linux等系统用U盘
通过下面的命令，找出U盘挂载的路径</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/05/mac_write_iso_into_udisk/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">May 21, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/04/pg_close_session_remove_db/">Postgres关闭某个数据库关联的session</a></h3>
                <div><a class="tag_item">postgres</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">Postgres删除数据库的时候，报错：有其他用户正在使用该数据库，无法删除。这时，需要关闭这个数据库的相关的连接，然后再删除数据库
可以执行下面的命令来关闭连接：</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/04/pg_close_session_remove_db/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">April 23, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/04/docker-hub-mirror/">Docker Hub国内镜像加速</a></h3>
                <div><a class="tag_item">docker</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">国内访问Docker Hub速度比较感人，这个时候需要配置国内的镜像，来加速下载。由于镜像服务可能出现宕机，建议同时配置多个镜像。
Ubuntu 16.04+、Debian 8+、CentOS 7新建或者修改 /etc/docker/daemon.json，写入如下内容</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/04/docker-hub-mirror/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">April 22, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/04/modify-apine-mirror/">修改Alpine镜像源</a></h3>
                <div><a class="tag_item">alpine</a><a class="tag_item">docker</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">docker使用alpine作为基础可以减少image的大小，但是如果编写的dockerfile中需要安装一些软件，在编译image过程中，可能速度会很慢甚至卡住。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/04/modify-apine-mirror/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">April 21, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/01/postgres-frequently-used-commands/">转: Postgres数据库DBA常用命令</a></h3>
                <div><a class="tag_item">postgres</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7"> 原作者：廖学强 原文链接：点击这里 查看帮助命令
DB=# help --总的帮助 DB=# \h --SQL commands级的帮助 DB=# \? --psql commands级的帮助 按列显示，类似mysql的\G</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/01/postgres-frequently-used-commands/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">January 27, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/01/manage-distribution-session-by-id/">根据ID来管理分布式session - 新老界面session不一致导致强制登出问题的修复</a></h3>
                <div><a class="tag_item">session</a><a class="tag_item">分布式</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">背景由于历史原因，原先的界面是用vaadin框架来实现。但是这个框架不适合互联网的分布式系统，正在逐步用目前主流的前端框架重写各个模块，把旧的vaadin页面替换掉。在替换过程中，新老界面并存。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/01/manage-distribution-session-by-id/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">January 26, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/01/mac-check-nearby-wifi-channel/">Mac 检查附近wifi所使用的信道</a></h3>
                <div><a class="tag_item">wifi</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">信道，也称作通道或频段，是以无线信号作为传输载体的数据信号传送通道。2.4G频段的工作频率为2.4-2.4835GHz，这83.5MHz频带划分为13个信道，各信道中心频率相差5MHz，向上向下分别扩展11MHz，信道带宽22MHz。中国采用欧洲/ETSI标准，使用1-13信道。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/01/mac-check-nearby-wifi-channel/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">January 24, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/01/mac-shell-support-map/">Mac下shell命令支持map</a></h3>
                <div><a class="tag_item">shell</a><a class="tag_item">declare</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">Mac自带的bash是3.x版本的，shell中的declare命令不支持-A这个参数，会报下面的错误：
declare: -A: invalid option declare: usage: declare [-afFirtx] [-p] [name[=value] ...] 这个参数从bash 4.x开始支持，需要升级至4.x以上的版本</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/01/mac-shell-support-map/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">January 19, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2020/01/quartz-job-issue-improvement/">Quartz job使用过程中的发现问题与改进</a></h3>
                <div><a class="tag_item">quartz</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">遇到的问题与原因分析生产环境中遇到的问题：
服务在启动过程中，不时地卡住，后来发生的越来越频繁。看日志分析，卡在初始化quartz job store的时候 服务在运行过程中，不时地出现定时任务不被触发的情况 通过分析，得知问题产生的原因：</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2020/01/quartz-job-issue-improvement/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">January 5, 2020</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2019/12/incident-caused-by-app/">复盘 - 手机app上一行代码导致的生产事故</a></h3>
                <div><a class="tag_item">生产事故</a><a class="tag_item">复盘</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">过程由于一些历史原因，以及与原先代码的兼容性，临时文件存储在minio中。
某天，生产环境突发事故，minio集群的CPU与内存爆了，只能重启集群。过了十来分钟，很多服务都不可用，健康检查都不通过。日志中的错误信息显示，这些服务都是数据库拿不到连接。需要事先处理数据库连接的问题，于是连接到数据库查死锁，终止导致死锁的sql进程，再重启来恢复这些服务。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2019/12/incident-caused-by-app/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">December 10, 2019</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2019/12/pg-recreate-pglogical-slave/">重建基于pglogical逻辑复制的从库</a></h3>
                <div><a class="tag_item">postgres</a><a class="tag_item">pglogical</a><a class="tag_item">从库</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">《Postgres 9.x 升级至 10.x》一文中提到了使用pglogical逻辑复制升级。基于这种方式的升级有个缺点，就是主库的DDL发生改变的话，那么从库的复制就会有影响，可能需要重建从库来解决。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2019/12/pg-recreate-pglogical-slave/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">December 6, 2019</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2019/12/pg-upgrade-version/">Postgres 9.x 升级至 10.x</a></h3>
                <div><a class="tag_item">postgres</a><a class="tag_item">升级</a><a class="tag_item">pglogical</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">目前主要有两种升级方式，它们分别使用于不同的场景。
升级方式 优点 缺点 pglogical逻辑复制升级 停机时间短 需提前准备从库，并搭建replication，在replication期间，需考虑DDL语句带来的影响。 pg_upgrade升级 不需要提前准备replication 升级完成后需检查index是否正常，并执行vacuum analyze，对于数据量较大的库，这可能耗时较长 逻辑复制升级前提条件 所有表都必须有主键 可以用下面的语句来检查</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2019/12/pg-upgrade-version/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">December 1, 2019</p>
          </div>
        
          <div class="hx-mb-10">
            <h3><a style="color: inherit; text-decoration: none;" class="hx-block hx-font-semibold hx-mt-8 hx-text-2xl " href="/blog/2018/12/hibernate-criteria-builder-time-range/">Hibernate中用criteria builder处理日期与时间分开的字段</a></h3>
                <div><a class="tag_item">hibernate</a><a class="tag_item">criteria builder</a></div>
              <p class="hx-opacity-80 hx-mt-4 hx-leading-7">现有系统中原先在设计数据库字段的时候，把日期与时间分别存入两个不同的字段，但是这两个字段在数据库中都是以timestamp类型来保存。这样的话，如果需要在where条件中把这两个字段与某个特定的时间做比较，则需要分别截取有效的信息。对于日期字段仅仅取出日期的值，把时间舍弃；对于时间字段仅仅取出时间的值，把日期舍弃。</p>
            <p class="hx-opacity-80 hx-mt-1 hx-leading-7">
              <a class="hx-text-[color:hsl(var(--primary-hue),100%,50%)] hx-underline hx-underline-offset-2 hx-decoration-from-font" href="/blog/2018/12/hibernate-criteria-builder-time-range/">更多 →</a>
            </p>
            <p class="hx-opacity-50 hx-text-sm hx-mt-4 hx-leading-7">December 6, 2018</p>
          </div>
        
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/blog/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/page/6/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/blog/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/blog/page/6/" aria-label="Page 6" class="page-link" role="button">6</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 7" class="page-link" role="button">7</a>
      </li>
      <li class="page-item">
        <a href="/blog/page/8/" aria-label="Page 8" class="page-link" role="button">8</a>
      </li>
      <li class="page-item">
        <a href="/blog/page/8/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/page/8/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
      </main>
    </article>
    <div class="max-xl:hx-hidden hx-h-0 hx-w-64 hx-shrink-0"></div>
  </div>
      <footer class="hextra-footer hx-bg-gray-100 hx-pb-[env(safe-area-inset-bottom)] dark:hx-bg-neutral-900 print:hx-bg-transparent"><div class="hx-mx-auto hx-flex hx-gap-2 hx-py-2 hx-px-4 hx-max-w-screen-xl"><button
  title="切换主题"
  data-theme="light"
  class="theme-toggle hx-group hx-h-7 hx-rounded-md hx-px-2 hx-text-left hx-text-xs hx-font-medium hx-text-gray-600 hx-transition-colors dark:hx-text-gray-400 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50"
  type="button"
  aria-label="切换主题"
>
  <div class="hx-flex hx-items-center hx-gap-2 hx-capitalize"><svg height=12 class="group-data-[theme=light]:hx-hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span class="group-data-[theme=light]:hx-hidden">浅色</span><svg height=12 class="group-data-[theme=dark]:hx-hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg><span class="group-data-[theme=dark]:hx-hidden">深色</span></div>
</button>
</div><hr class="dark:hx-border-neutral-800" /><div
    class="hx-max-w-screen-xl hx-mx-auto hx-flex hx-justify-center hx-py-12 hx-pl-[max(env(safe-area-inset-left),1.5rem)] hx-pr-[max(env(safe-area-inset-right),1.5rem)] hx-text-gray-600 dark:hx-text-gray-400 md:hx-justify-start"
  >
    <div class="hx-flex hx-w-full hx-flex-col hx-items-center sm:hx-items-start"><div class="hx-mt-6 hx-text-xs"><img class="favicon" src="/favicon-32x32.png">Copyright © 2018 - 2025 保罗札记. All Rights Reserved</div>
    </div>
  </div>
</footer>
    
    <script defer src="/js/main.js" integrity=""></script>


<script defer src="/lib/flexsearch/flexsearch.bundle.min.0425860527cc9968f9f049421c7a56b39327d475e2e3a8f550416be3a9134327.js" integrity="sha256-BCWGBSfMmWj58ElCHHpWs5Mn1HXi46j1UEFr46kTQyc="></script>
    <script defer src="/zh-cn.search.js" integrity=""></script>


  </body>
</html>
